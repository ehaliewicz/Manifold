#include <genesis.h>
#include "colors.h"
#include "portal_map.h"
#include "vertex.h"

static s16 sectors[136] ={
    0, 0, 4, 0<<4, 100<<4, 3, 3, 0,
    5, 4, 4, 0<<4, 100<<4, 3, 3, 0,
    10, 8, 4, 0<<4, 100<<4, 3, 3, 0,
    15, 12, 6, 0<<4, 150<<4, 3, 3, 0,
    22, 18, 3, 0<<4, 150<<4, 3, 3, 0,
    26, 21, 3, -10<<4, 150<<4, 1, 3, 0,
    30, 24, 4, 0<<4, 150<<4, 3, 3, 0,
    35, 28, 4, 0<<4, 150<<4, 3, 3, 0,
    40, 32, 4, 0<<4, 150<<4, 3, 3, 0,
    45, 36, 4, 0<<4, 150<<4, 3, 3, 0,
    50, 40, 4, -10<<4, 150<<4, 1, 3, 0,
    55, 44, 3, -10<<4, 150<<4, 1, 3, 0,
    59, 47, 4, -10<<4, 150<<4, 1, 3, 0,
    64, 51, 5, -10<<4, 150<<4, 1, 3, 0,
    70, 56, 6, -10<<4, 150<<4, 1, 3, 0,
    77, 62, 4, 0<<4, 150<<4, 3, 3, 0,
    82, 66, 4, 80<<4, 150<<4, 3, 3, 0,
};

static const u16 walls[87] = {
    0, 1, 2, 3, 0, 
    1, 4, 5, 2, 1, 
    4, 6, 7, 5, 4, 
    6, 8, 25, 21, 20, 7, 6, 
    8, 9, 25, 8, 
    20, 19, 7, 20, 
    25, 26, 22, 21, 25, 
    26, 27, 23, 22, 26, 
    27, 28, 24, 23, 27, 
    28, 14, 17, 24, 28, 
    20, 21, 22, 31, 20, 
    24, 22, 23, 24, 
    22, 24, 18, 31, 22, 
    9, 10, 27, 26, 25, 9, 
    10, 11, 12, 13, 28, 27, 10, 
    14, 15, 16, 17, 14, 
    12, 33, 34, 13, 12, 
};
static const s16 portals[70] = {
    -1, 1, -1, -1, 
    -1, 2, -1, 0, 
    -1, 3, -1, 1, 
    -1, 4, 6, 10, 5, 2, 
    -1, 13, 3, 
    -1, -1, 3, 
    13, 7, 10, 3, 
    13, 8, 11, 6, 
    14, 9, 11, 7, 
    -1, 15, -1, 8, 
    3, 6, 12, -1, 
    12, 7, 8, 
    11, -1, -1, 10, 
    -1, 14, 7, 6, 4, 
    -1, -1, 16, -1, 8, 13, 
    -1, -1, -1, 9, 
    -1, -1, -1, 14, 
};

static const u8 portal_contributes[70] = {
    -1, 0, -1, -1, 
    -1, 0, -1, 0, 
    -1, 1, -1, 0, 
    -1, 0, 0, 1, 1, 1, 
    -1, 1, 1, 
    -1, -1, 1, 
    1, 0, 1, 0, 
    1, 0, 1, 0, 
    1, 0, 1, 0, 
    -1, 0, -1, 0, 
    1, 1, 0, -1, 
    0, 1, 1, 
    0, -1, -1, 0, 
    -1, 0, 1, 1, 1, 
    -1, -1, 1, -1, 1, 0, 
    -1, -1, -1, 0, 
    -1, -1, -1, 1, 

};

static const u8 wall_normal_quadrants[70] ={
    FACING_DOWN,
    QUADRANT_1,
    QUADRANT_0,
    FACING_RIGHT,
    QUADRANT_2,
    QUADRANT_1,
    FACING_UP,
    QUADRANT_3,
    QUADRANT_2,
    FACING_UP,
    QUADRANT_0,
    QUADRANT_3,
    FACING_LEFT,
    FACING_LEFT,
    FACING_UP,
    QUADRANT_0,
    QUADRANT_3,
    FACING_DOWN,
    QUADRANT_2,
    FACING_UP,
    FACING_RIGHT,
    FACING_RIGHT,
    FACING_DOWN,
    QUADRANT_1,
    QUADRANT_1,
    QUADRANT_1,
    QUADRANT_3,
    FACING_DOWN,
    QUADRANT_2,
    QUADRANT_1,
    QUADRANT_0,
    QUADRANT_3,
    QUADRANT_1,
    FACING_UP,
    QUADRANT_3,
    QUADRANT_3,
    FACING_LEFT,
    FACING_UP,
    QUADRANT_0,
    FACING_DOWN,
    QUADRANT_2,
    QUADRANT_1,
    QUADRANT_1,
    FACING_RIGHT,
    QUADRANT_0,
    QUADRANT_2,
    QUADRANT_1,
    QUADRANT_2,
    QUADRANT_1,
    FACING_RIGHT,
    QUADRANT_3,
    QUADRANT_2,
    QUADRANT_1,
    QUADRANT_0,
    QUADRANT_3,
    FACING_DOWN,
    QUADRANT_2,
    QUADRANT_1,
    QUADRANT_1,
    QUADRANT_0,
    QUADRANT_3,
    QUADRANT_3,
    FACING_LEFT,
    FACING_UP,
    FACING_RIGHT,
    FACING_DOWN,
    QUADRANT_2,
    QUADRANT_1,
    QUADRANT_0,
    QUADRANT_3,
};

static const wall_col wall_colors[70] ={
    {.mid_col = 0x1},
    {.upper_col = 0x1, .lower_col = 0x1},
    {.mid_col = 0x1},
    {.mid_col = 0x1},
    {.mid_col = 0x1},
    {.upper_col = 0x1, .lower_col = 0x1},
    {.mid_col = 0x1},
    {.upper_col = 0x1, .lower_col = 0x1},
    {.mid_col = 0x1},
    {.upper_col = 0x1, .lower_col = 0x1},
    {.mid_col = 0x1},
    {.upper_col = 0x1, .lower_col = 0x1},
    {.mid_col = 0x1},
    {.upper_col = 0x1, .lower_col = 0x1},
    {.upper_col = 0x1, .lower_col = 0x1},
    {.upper_col = 0x1, .lower_col = 0x1},
    {.upper_col = 0x1, .lower_col = 0x1},
    {.upper_col = 0x3, .lower_col = 0x1},
    {.mid_col = 0x1},
    {.upper_col = 0x1, .lower_col = 0x1},
    {.upper_col = 0x1, .lower_col = 0x1},
    {.mid_col = 0x1},
    {.mid_col = 0x1},
    {.upper_col = 0x1, .lower_col = 0x1},
    {.upper_col = 0x1, .lower_col = 0x1},
    {.upper_col = 0x1, .lower_col = 0x1},
    {.upper_col = 0x1, .lower_col = 0x1},
    {.upper_col = 0x1, .lower_col = 0x1},
    {.upper_col = 0x1, .lower_col = 0x1},
    {.upper_col = 0x1, .lower_col = 0x1},
    {.upper_col = 0x1, .lower_col = 0x1},
    {.upper_col = 0x1, .lower_col = 0x1},
    {.upper_col = 0x1, .lower_col = 0x1},
    {.upper_col = 0x1, .lower_col = 0x1},
    {.upper_col = 0x1, .lower_col = 0x1},
    {.upper_col = 0x1, .lower_col = 0x1},
    {.mid_col = 0x1},
    {.upper_col = 0x1, .lower_col = 0x1},
    {.mid_col = 0x1},
    {.upper_col = 0x1, .lower_col = 0x1},
    {.upper_col = 0x1, .lower_col = 0x3},
    {.upper_col = 0x1, .lower_col = 0x8},
    {.upper_col = 0x1, .lower_col = 0x1},
    {.mid_col = 0x1},
    {.upper_col = 0x1, .lower_col = 0x1},
    {.upper_col = 0x1, .lower_col = 0x8},
    {.upper_col = 0x1, .lower_col = 0x8},
    {.upper_col = 0x1, .lower_col = 0x1},
    {.mid_col = 0x1},
    {.mid_col = 0x1},
    {.upper_col = 0x1, .lower_col = 0x1},
    {.mid_col = 0x1},
    {.upper_col = 0x1, .lower_col = 0x1},
    {.upper_col = 0x1, .lower_col = 0x8},
    {.upper_col = 0x1, .lower_col = 0x8},
    {.upper_col = 0x1, .lower_col = 0x3},
    {.mid_col = 0x1},
    {.mid_col = 0x1},
    {.upper_col = 0x1, .lower_col = 0x3},
    {.mid_col = 0x1},
    {.upper_col = 0x1, .lower_col = 0x8},
    {.upper_col = 0x1, .lower_col = 0x1},
    {.mid_col = 0x1},
    {.mid_col = 0x1},
    {.mid_col = 0x1},
    {.upper_col = 0x1, .lower_col = 0x1},
    {.mid_col = 0x1},
    {.mid_col = 0x1},
    {.mid_col = 0x1},
    {.upper_col = 0x1, .lower_col = 0x1},
};

#define VERT(x1,y1) { .x = (x1 * 2), .y = ((-y1) * 2) } 
static const vertex vertexes[35] = {
    VERT(170,90),
    VERT(280,90),
    VERT(240,170),
    VERT(170,130),
    VERT(350,120),
    VERT(310,170),
    VERT(380,190),
    VERT(330,190),
    VERT(380,200),
    VERT(440,230),
    VERT(460,250),
    VERT(480,320),
    VERT(475,350),
    VERT(440,365),
    VERT(400,370),
    VERT(400,450),
    VERT(360,450),
    VERT(360,370),
    VERT(300,350),
    VERT(300,190),
    VERT(300,220),
    VERT(350,230),
    VERT(320,260),
    VERT(390,290),
    VERT(350,340),
    VERT(380,230),
    VERT(360,250),
    VERT(440,280),
    VERT(400,340),
    VERT(340,340),
    VERT(390,330),
    VERT(300,270),
    VERT(400,440),
    VERT(490,400),
    VERT(450,410),
};

static const sector_type sector_types[17] = {
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,};

static sector_param sector_params[17] = {
{.light=0, .orig_height=0<<4, .ticks_left=0, .state=0},
{.light=0, .orig_height=0<<4, .ticks_left=0, .state=0},
{.light=0, .orig_height=0<<4, .ticks_left=0, .state=0},
{.light=0, .orig_height=0<<4, .ticks_left=0, .state=0},
{.light=0, .orig_height=0<<4, .ticks_left=0, .state=0},
{.light=0, .orig_height=0<<4, .ticks_left=0, .state=0},
{.light=0, .orig_height=0<<4, .ticks_left=0, .state=0},
{.light=0, .orig_height=0<<4, .ticks_left=0, .state=0},
{.light=0, .orig_height=0<<4, .ticks_left=0, .state=0},
{.light=0, .orig_height=0<<4, .ticks_left=0, .state=0},
{.light=0, .orig_height=0<<4, .ticks_left=0, .state=0},
{.light=0, .orig_height=0<<4, .ticks_left=0, .state=0},
{.light=0, .orig_height=0<<4, .ticks_left=0, .state=0},
{.light=0, .orig_height=0<<4, .ticks_left=0, .state=0},
{.light=0, .orig_height=0<<4, .ticks_left=0, .state=0},
{.light=0, .orig_height=0<<4, .ticks_left=0, .state=0},
{.light=0, .orig_height=0<<4, .ticks_left=0, .state=0},
};

const portal_map editor_test_map  = {
    .num_sectors = 17,
    .num_walls = 70,
    .num_verts = 35,
    .sectors = sectors,
    .walls = walls,
    .portals = portals,
    .vertexes = vertexes,
    .wall_colors = wall_colors,
    .wall_norm_quadrants = wall_normal_quadrants,
    .sector_params = sector_params,
    .sector_types = sector_types,
    .portal_contributes = portal_contributes
};